---
{"dg-publish":true,"permalink":"/czcçŸ¥è¯†åº“/5-å°±ä¸š/Python/pythonå­¦ä¹ /3-pythoné«˜çº§/322-è£…é¥°å™¨/","dgPassFrontmatter":true,"created":"2024-12-02T22:00:37.005+08:00","updated":"2024-12-08T12:39:45.394+08:00"}
---


é—­åŒ…çš„ä½œç”¨å°±æ˜¯ä¸ºäº†ç¼–å†™è£…é¥°å™¨
è£…é¥°å™¨çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªé—­åŒ…

# è£…é¥°å™¨å®šä¹‰

å°±æ˜¯ç»™å·²æœ‰å‡½æ•°å¢åŠ é¢å¤–åŠŸèƒ½çš„å‡½æ•°ï¼Œå®ƒæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª**é—­åŒ…å‡½æ•°**ã€‚

è£…é¥°å™¨çš„åŠŸèƒ½ç‰¹ç‚¹ï¼š
â‘ ä¸ä¿®æ”¹å·²æœ‰å‡½æ•°çš„æºä»£ç 
â‘¡ä¸ä¿®æ”¹å·²æœ‰å‡½æ•°çš„è°ƒç”¨æ–¹å¼
â‘¢ç»™å·²æœ‰å‡½æ•°å¢åŠ é¢å¤–çš„åŠŸèƒ½


é—­åŒ…è¿™ä¹ˆç¼–ç¨‹è£…é¥°å™¨çš„ï¼Ÿ

# è£…é¥°å™¨çš„é›å½¢ï¼ˆä¸‹é¢éƒ½æ˜¯æ²¡æœ‰è¿”å›å€¼çš„å‡½æ•°ï¼‰

æ —å­1ï¼š

åœ¨å‘è¯„è®ºå‡½æ•°å‰åŠ ä¸€ä¸ªç™»å½•çš„åŠŸèƒ½

æå‡ºéœ€æ±‚ï¼šåœ¨ä¸æ”¹å˜æºå‡½æ•°ä»¥åŠæºå‡½æ•°è°ƒç”¨æ–¹å¼çš„å‰æä¸‹ï¼Œä¸ºå…¶æ·»åŠ ä¸€ä¸ªæƒé™éªŒè¯ï¼ˆè¯·å…ˆç™»å½•ï¼‰
ä¸æ”¹å˜æºå‡½æ•°ã€ä¸æ”¹å˜åŸæœ‰è°ƒç”¨æ–¹å¼ã€éœ€è¦å¢åŠ æƒé™éªŒè¯ï¼ˆé¢å¤–åŠŸèƒ½ï¼‰


å®šä¹‰ä¸€ä¸ªè£…é¥°å™¨ï¼šæœ¬è´¨ï¼šé—­åŒ…å‡½æ•°ï¼ˆâ‘ æœ‰åµŒå¥—â‘¡æœ‰å¼•ç”¨â‘¢æœ‰è¿”å›ï¼‰ï¼Œè€Œä¸”**è£…é¥°å™¨å‡½æ•°æœ¬èº«å¿…é¡»æœ‰ä¸€ä¸ªfnå‚æ•°ï¼Œä»£è¡¨è¦è£…é¥°çš„å‡½æ•°åç§°ï¼Œå½“æˆ‘ä»¬è°ƒç”¨è£…é¥°å™¨çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†è¦è£…é¥°å‡½æ•°çš„åç§°å‘ç»™fnå‚æ•°**

```python
def logging(fn):  # ä¸€èˆ¬éƒ½å«fn
	def inner():
		# å¼•ç”¨fnå‡½æ•°ä¹‹å‰ï¼Œå¢åŠ é¢å¤–åŠŸèƒ½
		print('è¿™é‡Œæ˜¯ç™»å½•æ“ä½œ')
		# å¼•ç”¨å±€éƒ¨å˜é‡fn
		fn()
	return inner

@logging  # è¯­æ³•ç³–ğŸ­ 
def comment():
	print('è¿™é‡Œæ˜¯å‘è¡¨è¯„è®ºæ“ä½œ')

comment()  # æ‰§è¡Œå‘è¡¨è¯„è®ºå‡½æ•°
```

**å½“è°ƒç”¨è¯­æ³•ç³–çš„æ—¶å€™ä¼šè‡ªåŠ¨æŠŠcomment()ä½œä¸ºå‚æ•°ä¼ ç»™fn**

è°ƒè¯•çš„ä»£ç æ‰§è¡Œé¡ºåº
1. @è¯­æ³•ç³–é¦–å…ˆè¢«æ‰§è¡Œ
2. æ‰§è¡Œè£…é¥°å™¨å‡½æ•°æŠŠè¦è£…é¥°çš„å‡½æ•°åç§°ä¼ é€’ç»™fnå‚æ•°
3. æ‰§è¡Œè£…é¥°å™¨å†…éƒ¨çš„innerå‡½æ•°ï¼Œè¡¨ç°ä¸ºæ‰§è¡Œå‡½æ•°åç§°comment
4. å½“è£…é¥°å™¨æ‰§è¡Œfn()çš„æ—¶å€™ï¼ŒåŸå‡½æ•°çœŸæ­£è¢«æ‰§è¡Œ

![](/img/user/czcçŸ¥è¯†åº“/9-æ— å¥‡ä¸æœ‰/9-é™„ä»¶/é™„ä»¶/322-è£…é¥°å™¨_image.png)

comment()æ˜¯æœ€åä¸€æ­¥æ‰§è¡Œçš„

è£…é¥°å™¨çš„åŸå§‹å®ç°ï¼šï¼ˆç°åœ¨éƒ½æ˜¯ç”¨ä¸Šé¢çš„è¯­æ³•ç³–æ¥å®ç°ï¼‰

> [!tip]
> **è£…é¥°å™¨è°ƒç”¨çš„æœ¬è´¨â†“ï¼š**
> **ï¼ˆ`func= logging(comment)`ï¼‰åªä¸è¿‡æŠŠfuncå†™æˆcommentå°±å’Œè£…é¥°å™¨å®Œå…¨ä¸€è‡´äº†**
> å†è°ƒç”¨comment()çš„æ—¶å€™æœ¬è´¨å°±æ˜¯è°ƒç”¨inner()äº†
> å› ä¸ºè£…é¥°å™¨ä¸èƒ½æ”¹å˜åŸæ¥å‡½æ•°çš„ä»£ç å’Œè°ƒç”¨æ–¹å¼
> æ‰€ä»¥ç”¨è¯­æ³•ç³–çš„æ ¼å¼æ¥å†™

```python
# å®šä¹‰ä¸€ä¸ªè£…é¥°å™¨ï¼ˆâ‘ ä¸èƒ½æ”¹å˜æºä»£ç â‘¡ä¸èƒ½æ”¹å˜åŸæœ‰å‡½æ•°çš„è°ƒç”¨æ–¹å¼ï¼‰
def logging(fn):
	# fn = comment
	def inner():
		print('è¯·å…ˆç™»å½•')
		fn()
	return inner
def comment():
	print('å‘è¡¨è¯„è®º')
	
comment = logging(comment)  # ç»™commentæ·»åŠ è£…é¥°å™¨,å˜é‡åç§°ç”¨åŒåï¼Œè¿™æ ·å°±ä¸ä¼šæ”¹å˜åŸæœ‰è°ƒç”¨æ–¹å¼
# comment = Logging() è¿”å›ç»“æœ => inner
comment()  # è¿™é‡Œçš„commentå·²ç»ä¸æ˜¯åŸå…ˆçš„commentäº†
# comment() => inner()
```

---

**æ —å­2ï¼šå®é™…åº”ç”¨ï¼šæ±‚ç¨‹åºæ‰§è¡Œæ—¶é—´è£…é¥°å™¨**ï¼ˆè£…é¥°å™¨å¸¦ä¸å®šé•¿å‚æ•°ï¼ˆè‡ªå·±åŠ  çš„ï¼‰ï¼‰

åœ¨ä¸æ”¹å˜åŸå‡½æ•°ä»£ç å’Œè°ƒç”¨æ–¹å¼çš„å‰æä¸‹ï¼Œä¸ºå…¶æ·»åŠ ç»Ÿè®¡æ‰§è¡Œæ—¶é—´çš„åŠŸèƒ½ï¼šå¯ä»¥ä½¿ç”¨è£…é¥°å™¨ -> æœ‰åµŒå¥—ã€æœ‰å¼•ç”¨ã€æœ‰è¿”å›
çœ‹è¿™ä¸ªä¾‹å­è¶³å¤Ÿäº†ï¼Œè¿™é‡Œæ¶µç›–å¾ˆå¤šçŸ¥è¯†ç‚¹ï¼Œ**åŒ…æ‹¬ä¸‹é¢çš„å¸¦å‚æ•°çš„è£…é¥°å™¨çŸ¥è¯†**
```python
import time
def get_time(fn):
	def inner(*args, **kwargs):  # è£…é¥°å™¨å¸¦ä»»æ„å‚æ•°
		start = time.time()
		fn(*args, **kwargs)
		end = time.time()
		print(f'{fn.__name__}å‡½æ•°æ‰§è¡Œæ—¶é—´ï¼š{end - start:.2f}')  # è·å–å‡½æ•°åï¼›æ ¼å¼åŒ–è¾“å‡º
	return inner

@get_time
def ikun(b):
	a = []
	for i in range(b):
		a.append(i * 'ikun')

ikun(10000)
```


---
# è£…é¥°å™¨è£…é¥°å¸¦æœ‰å‚æ•°çš„å‡½æ•°foré€šç”¨è£…é¥°å™¨

æ —å­3ï¼š**è£…é¥°å™¨è£…é¥°å¸¦æœ‰å‚æ•°çš„å‡½æ•°**ï¼Œå‡½æ•°å‡ ä¸ªå‚æ•°ï¼Œinneræ¥æ”¶å‡ ä¸ªå‚æ•°

éœ€æ±‚ï¼šâ‘ åœ¨ä¸æ”¹å˜åŸæœ‰å‡½æ•°ä»£ç â‘¡ä¸æ”¹å˜åŸæœ‰å‡½æ•°è°ƒç”¨æ–¹å¼çš„å‰æä¸‹â‘¢ä¸ºå…¶æ–°å¢ä¸€ä¸ªè¾“å‡ºæ—¥å¿—åŠŸèƒ½
æ³¨ï¼šå®é™…æ—¥å¿—åº”è¯¥å†™å…¥åˆ°æ—¥å¿—æ–‡ä»¶ï¼Œä½†æ˜¯è¿˜æ²¡å­¦ï¼Œè¿™é‡Œå°±ç”¨printä»£æ›¿
éœ€æ±‚ï¼šåœ¨è¾“å‡ºç»“æœä¹‹å‰ï¼Œæ·»åŠ ä¸€ä¸ªæ‰“å°æ—¥å¿—çš„åŠŸèƒ½=>
`print('--æ—¥å¿—ä¿¡æ¯ï¼šæ­£åœ¨åŠªåŠ›è¿›è¡Œè®¡ç®—--')`

```python
def logging(fn):
	def inner(a, b):
	#æ·»åŠ é¢å¤–è¦å¢åŠ çš„åŠŸèƒ½
	print('-----æ—¥å¿—ä¿¡æ¯ï¼šæ­£åœ¨åŠªåŠ›è¿›è¡Œè®¡ç®—-----')
	fn(a, b)  #å®é™…æ‰§è¡Œsum_numå‡½æ•°
	return inner
	
#å®šä¹‰ä¸€ä¸ªå‡½æ•°sum_numï¼ˆï¼‰ï¼Œé’ˆå¯¹å‚æ•°æ±‚å’Œ
@logging
def sum_num(num1, num2):
	result = num1 + num2
	print(result)
	
#è°ƒç”¨åŸå‡½æ•°
sum_num(10, 20)  #åœ¨è£…é¥°å™¨çš„åº•å±‚ï¼Œç›¸å½“äºè°ƒç”¨innerï¼ˆï¼‰
```


æ —å­4ï¼šè¿›é˜¶ï¼šä¸å®šé•¿å‚æ•°çš„è£…é¥°å™¨

```python
def logging(fn):
	def inner(*args, **kwargs):
		#è¾“å‡ºæ—¥ å¿—ä¿¡æ¯
		print('-----è¾“å‡ºæ—¥å¿—ï¼šæ­£åœ¨åŠªåŠ›è¿›è¡ŒåŠ æ³•è¿ç®—')
		fn(*args, **kwargs)
	return inner

#å®šä¹‰æºå‡½æ•°
@logging
def sum_num(*args, **kwargs):
	sum1 = 0
	for i in args:
		sum1 += i
	for value in kwargs.values():
		sum1 += value
	print(sum1)
##è°ƒç”¨sum_numå‡½æ•°
sum_num(10,20,30,a=40,b=50)
```


# è£…é¥°å™¨-è£…é¥°å¸¦æœ‰è¿”å›å€¼çš„å‡½æ•°foré€šç”¨è£…é¥°å™¨

åŸå‡½æ•°ï¼š
```python
def func(num1ï¼Œnum2):
	result = num1+ num2
	return result
print(func(10ï¼Œ20))
```

éœ€æ±‚ï¼šç¼–å†™ä¸€ä¸ªè£…é¥°å™¨ï¼Œåœ¨ä¸æ”¹å˜åŸå‡½æ•°ä»¥åŠè°ƒç”¨æ–¹å¼çš„åŸºç¡€ä¸Šï¼Œä¸ºå…¶æ·»åŠ ä¸€ä¸ªæ—¥å¿—åŠŸèƒ½

```python
# å®šä¹‰è£…é¥°å™¨åç§°
def logging(fn);
	# â‘ åµŒå¥—
	def inner(num1, num2):
		# æ—¥å¿—è¾“å‡ºåŠŸèƒ½
		print('è¿™æ˜¯æ—¥å¿—ä¿¡æ¯')
		# â‘¡ å¼•ç”¨
		return fn(num1, num2)  # fn = func, fn() â†’ func(10,20) â†’ 30
	# â‘¢è¿”å›
	return inner

@logging
def func(num1, num2):
	result = num1 + num2
	return result

print(func(10, 20))  # func(10, 20) è°ƒç”¨inner(10, 20)
```


# é€šç”¨è£…é¥°å™¨ï¼ˆé‡ç‚¹ï¼‰

é‡ç‚¹ï¼šé€šç”¨è£…é¥°å™¨=>æ—¢å¯ä»¥è£…é¥°å™¨å¸¦æœ‰å‚æ•°çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ç”¨äºè£…é¥°å¸¦æœ‰è¿”å›å€¼çš„å‡½æ•°
æ€»ç»“å£è¯€ï¼šé€šç”¨è£…é¥°å™¨äº”æ­¥èµ°=>â‘ æœ‰åµŒå¥—â‘¡æœ‰å¼•ç”¨â‘¢æœ‰ä¸å®šé•¿å‚æ•°â‘£æœ‰è¿”å›å€¼â‘¤è¿”å›å†…å±‚å‡½æ•°çš„åœ°å€

ä»¥åéƒ½å†™é€šç”¨è£…é¥°å™¨

```python
def logging(fn):
	def inner(*args, **kwargs):
		print('æ—¥å¿—')
		return fn(*args, **kwargs)
	return inner

@logging
def sub_num(num1, num2):
	return num1 - num2

print(sub_num(20, 10))
```
sumæ˜¯åŠ  subæ˜¯å‡

# è£…é¥°å™¨ä¼ å‚ï¼ˆå¸¦æœ‰å‚æ•°çš„é€šç”¨è£…é¥°å™¨ï¼‰
å†åŠ ä¸€å±‚åµŒå¥—ç”¨äºä¼ å‚

```python
# è£…é¥°å™¨ä¼ å‚ï¼ˆå¸¦æœ‰å‚æ•°çš„è£…é¥°å™¨ï¼‰
def decoration(flag):
    def logging(fn):
        def inner(*args, **kwargs):
            # åˆ¤æ–­æ˜¯åŠ æ³•è¿˜æ˜¯å‡æ³•è¿ç®—
            if flag == '+':
                print('---æ­£åœ¨åŠªåŠ›åŠ æ³•è¿ç®—---')
            elif flag == '-':
                print('---æ­£åœ¨åŠªåŠ›å‡æ³•è¿ç®—---')
            return fn(*args, **kwargs)
        return inner
    return logging

@decoration('+')
def sum_num(a, b):
    return a + b

print(sum_num(1, 2))

@decoration('-')
def sub_num(a, b):
    return a - b

print(sub_num(1, 2))
```

# ç±»è£…é¥°å™¨
è£…é¥°å™¨å¤§å¤šæ•°éƒ½æ˜¯é€šè¿‡å‡½æ•°æ¥è£…é¥°å‡½æ•°ï¼Œå…¶å®ä¹Ÿå¯ä»¥é€šè¿‡ä¸€ä¸ªç±»æ¥è£…é¥°å‡½æ•°ï¼Œè¿™ç§è£…é¥°å™¨å°±ç§°ä¹‹ä¸ºâ€ç±»è£…é¥°å™¨â€

```python
# è£…é¥°å™¨å¤§å¤šæ•°éƒ½æ˜¯é€šè¿‡å‡½æ•°æ¥è£…é¥°å‡½æ•°ï¼Œå…¶å®ä¹Ÿå¯ä»¥é€šè¿‡ä¸€ä¸ªç±»æ¥è£…é¥°å‡½æ•°ï¼Œè¿™ç§è£…é¥°å™¨å°±ç§°ä¹‹ä¸ºâ€ç±»è£…é¥°å™¨â€
# ç±»è£…é¥°å™¨è§„åˆ™ï¼š
# 1ã€å¿…é¡»æœ‰ä¸€ä¸ª__init__æ–¹æ³•ï¼Œç”¨äºæ¥æ”¶è¦ä¿®é¥°çš„å‡½æ•°
# 2ã€å¿…é¡»æŠŠè¿™ä¸ªç±»è½¬æ¢ä¸ºå¯ä»¥è°ƒç”¨çš„å‡½æ•° â†’ __call__æ–¹æ³•

# å®šä¹‰ä¸€ä¸ªç±»è£…é¥°å™¨
class Check():
    def __init__(self, fn):
        self.__fn = fn

    def __call__(self, *args, **kwargs):
        print('è¯·å…ˆç™»å½•')
        self.__fn()

# å®šä¹‰ä¸€ä¸ªæºå‡½æ•°
@Check
def comment():
    print('å‘è¡¨è¯„è®º')

# è°ƒç”¨åŸå‡½æ•°
comment()
```


# ä¸€ä¸ªå¦™å“‰çš„è£…é¥°å™¨ä¾‹é¢˜

```python
"""
4. é¢˜å¹²
æ ¹æ®å¦‚ä¸‹è¯´æ˜ï¼Œç¼–å†™ä»£ç å®Œæˆç›¸å…³éœ€æ±‚
1ã€
ä¸å¸¦è£…é¥°å™¨çš„åŸºç¡€åŠŸèƒ½ï¼šentry_grade
å¯ä»¥å®Œæˆã€æˆç»©å½•å…¥åŠŸèƒ½ã€
1.1å¯ä»¥é‡å¤å½•å…¥æˆç»©ï¼Œé»˜è®¤æ‰€æœ‰è¾“å…¥éƒ½æ˜¯åˆæ³•çš„(1~100ä¹‹é—´çš„æ•°)
1.2å½“å½•å…¥æˆç»©ä¸º0æ—¶ï¼Œç»“æŸæˆç»©çš„å½•å…¥
1.3å°†å½•å…¥çš„æˆç»©ä¿å­˜åœ¨åˆ—è¡¨ä¸­å¹¶è¿”å›ç»™å¤–ç•Œï¼Œä¾‹å¦‚ï¼š[90, 80, 50, 70]

2ã€
é€‰æ‹©è¯¾ç¨‹è£…é¥°å™¨ï¼šchoose_course
ä¸ºã€æˆç»©å½•å…¥åŠŸèƒ½ã€æ–°å¢é€‰æ‹©è¯¾ç¨‹çš„æ‹“å±•åŠŸèƒ½ï¼Œè¾¾åˆ°å¯ä»¥å½•å…¥ä¸åŒå­¦ç§‘çš„æˆç»©
2.1å¯ä»¥é‡å¤è¾“å…¥è¦å½•å…¥çš„å­¦ç§‘åï¼Œç„¶åå°±å¯ä»¥è¿›å…¥è¯¥é—¨å­¦ç§‘çš„ã€æˆç»©å½•å…¥åŠŸèƒ½ã€ï¼Œå½•å…¥ç»“æŸåï¼Œå¯ä»¥è¿›å…¥ä¸‹ä¸€é—¨å­¦ç§‘æˆç»©å½•å…¥
2.2å½“è¾“å…¥å­¦ç§‘åä¸ºqæ—¶ï¼Œç»“æŸæ‰€æœ‰å½•å…¥å·¥ä½œ
2.3å°†å­¦ç§‘æˆç»©ä¿å­˜åœ¨å­—å…¸ä¸­å¹¶è¿”å›ç»™å¤–ç•Œï¼Œä¾‹å¦‚ï¼š{'math': [90, 80, 50, 70], 'english': [70, 50, 55, 90]}

3ã€
å¤„ç†æˆç»©è£…é¥°å™¨ï¼šdeal_fail
å¯ä»¥å°†æ‰€æœ‰å½•å…¥çš„æˆç»©æŒ‰60åˆ†ä¸ºåˆ†æ°´å²­ï¼Œè½¬æ¢ä¸º "é€šè¿‡" | "ä¸é€šè¿‡"è¿›è¡Œå­˜å‚¨
3.1ï¼Œå¦‚æœåªå¯¹åŸåŠŸèƒ½è£…é¥°ï¼Œç»“æœè¿˜ä¸ºlistè¿”å›ç»™å¤–ç•Œï¼Œä¾‹å¦‚ï¼š["é€šè¿‡", "é€šè¿‡", "ä¸é€šè¿‡", "é€šè¿‡"]
3.2ï¼Œå¦‚æœå¯¹å·²è¢«é€‰æ‹©è¯¾ç¨‹è£…é¥°å™¨è£…é¥°äº†çš„åŸåŠŸèƒ½å†è£…é¥°ï¼Œç»“æœå°±ä¸ºdictè¿”å›ç»™å¤–ç•Œï¼Œ
ä¾‹å¦‚ï¼š{'math': ["é€šè¿‡", "é€šè¿‡", "ä¸é€šè¿‡", "é€šè¿‡"],'english': ["é€šè¿‡", "ä¸é€šè¿‡", "ä¸é€šè¿‡", "é€šè¿‡"]}
"""


def choose_course(func):
    def inner(*args, **kwargs):
        course_dict = {}
        while True:
            course = input("è¯·è¾“å…¥è¦å½•å…¥çš„å­¦ç§‘åï¼š")
            if course == "q":
                break
            course_dict[course] = func(*args, **kwargs)
        return course_dict
    return inner

def deal_fail(func):
    def inner(*args, **kwargs):
        result = func(*args, **kwargs)
        return ["é€šè¿‡" if grade >= 60 else "ä¸é€šè¿‡" for grade in result]
    return inner

@choose_course
@deal_fail
def entry_grade():
    result = []
    while True:
        grade = int(input("è¯·è¾“å…¥æˆç»©ï¼š"))
        if grade == 0:
            break
        result.append(grade)
    return result

print(entry_grade())

```